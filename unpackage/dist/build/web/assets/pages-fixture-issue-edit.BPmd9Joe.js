import{r as e,_ as a,p as o,q as t,L as l,v as s,x as u,d as i,w as r,i as m,o as n,e as d,f as p,t as c,E as f,y as _,z as v,F as y,aq as b,s as h,a9 as x,am as N,K as g}from"./index-BGMMYpLj.js";import{_ as j}from"./u-input.Coqpc1Jd.js";import{_ as T,a as C}from"./u-form.Q5Xs4RHm.js";import{_ as V}from"./uni-icons.DYEN23k6.js";import{_ as k}from"./uni-section.CCDL9Cq2.js";import{_ as w}from"./uni-list-item.SqYlFseI.js";import{_ as D}from"./uni-list.BH0W-wlO.js";import{Q as I,T as q}from"./work.CbAcu18Q.js";import{b as F,a as G}from"./prompt.CRqnvq7m.js";import{_ as L}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./u-icon.B26jy-l1.js";/* empty css                                                               */import"./u-line.CTRc1Fj8.js";import"./config.C9WjKJqE.js";const O=L({__name:"edit",setup(L){e(""),e(!1);const O=e(!0),z=e({operationtype:"MoveOut",compid:"",location:"",orderNumber:"",compName:"",ToolsTaskDetailGuid:""}),K=e({ToolName:"",OrderNumber:"",OperateType:"1",CompName:"",workstationName:""}),Q=e([]),U=e(0),W=e(0),E=e(0);a((e=>{z.value.orderNumber=e.orderNumber,z.value.compName=e.compName,z.value.ToolsTaskDetailGuid=e.toolsTaskDetailGuid,K.value.CompName=e.compName,W.value=e.amount,E.value=e.IssuedQuantity})),o((()=>{t().select(".sect").boundingClientRect((e=>{U.value=e.height-45+"px"})).exec()})),l((()=>{H()}));const H=()=>{I(K.value).then((e=>{Q.value=e.content}))},M=()=>{b()},R=()=>{q(z.value).then((e=>{F(),H(),h({title:e.msg,icon:"none"}),E.value++})).catch((()=>{G()})),z.value.compid="",O.value=!1,setTimeout((()=>{O.value=!0}),100)},S=()=>{x({onlyFromCamera:!0,scanType:["qrCode","barCode","datamatrix","pdf417"],success:e=>{z.value.compid=e.result,R()}})};return(e,a)=>{const o=s(u("up-input"),j),t=s(u("up-form-item"),T),l=s(u("uni-icons"),V),b=s(u("up-form"),C),h=m,x=s(u("uni-section"),k),I=s(u("uni-list-item"),w),q=s(u("uni-list"),D),F=N,G=g;return n(),i(h,{class:"content"},{default:r((()=>[d(x,{title:"出库",type:"line"},{default:r((()=>[d(h,{class:"box"},{default:r((()=>[d(b,{ref:"form",labelWidth:"80"},{default:r((()=>[d(t,{label:"工单号"},{default:r((()=>[d(o,{modelValue:z.value.orderNumber,"onUpdate:modelValue":a[0]||(a[0]=e=>z.value.orderNumber=e),disabled:""},null,8,["modelValue"])])),_:1}),d(t,{label:"治具编码"},{default:r((()=>[d(o,{placeholder:"条码",onFocus:M,modelValue:z.value.compid,"onUpdate:modelValue":a[1]||(a[1]=e=>z.value.compid=e),onConfirm:R,focus:O.value},{suffix:r((()=>[d(l,{type:"scan",onClick:S,color:"#777777",size:"24"})])),_:1},8,["modelValue","focus"])])),_:1})])),_:1},512)])),_:1})])),_:1}),d(x,{title:"清单",type:"line",class:"sect",style:{flex:"1"}},{right:r((()=>[d(h,{class:"",style:{display:"flex",gap:"10px"}},{default:r((()=>[d(h,{class:""},{default:r((()=>[p(" 需求："),d(G,{style:{color:"red","font-weight":"bold"}},{default:r((()=>[p(c(W.value),1)])),_:1})])),_:1}),d(h,{class:""},{default:r((()=>[p(" 已出库："),d(G,{style:{color:"seagreen","font-weight":"bold"}},{default:r((()=>[p(c(E.value),1)])),_:1})])),_:1})])),_:1})])),default:r((()=>[d(F,{"scroll-y":"true",style:f({height:U.value})},{default:r((()=>[d(q,{border:!0},{default:r((()=>[(n(!0),_(y,null,v(Q.value,(e=>(n(),i(I,{title:"治具编码："+e.CompID,note:"型号："+e.CompName,rightText:"储位："+e.Loc},null,8,["title","note","rightText"])))),256))])),_:1})])),_:1},8,["style"])])),_:1})])),_:1})}}},[["__scopeId","data-v-3c6e4356"]]);export{O as default};
