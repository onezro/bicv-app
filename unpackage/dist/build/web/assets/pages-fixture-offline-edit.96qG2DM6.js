import{n as e,r as a,_ as t,p as l,q as o,L as s,v as u,x as i,d as n,w as r,i as m,o as p,e as d,f as c,t as f,E as _,y as v,z as b,F as y,aq as h,a as x,s as g,a9 as j,am as T,K as N}from"./index-BGMMYpLj.js";import{_ as k}from"./u-input.Coqpc1Jd.js";import{_ as w,a as C}from"./u-form.Q5Xs4RHm.js";import{_ as V}from"./uni-icons.DYEN23k6.js";import{_ as O}from"./uni-section.CCDL9Cq2.js";import{_ as D}from"./uni-list-item.SqYlFseI.js";import{_ as S}from"./uni-list.BH0W-wlO.js";import{_ as I}from"./u-button.Dr9wKWVi.js";import{Q as q,c as F}from"./work.CbAcu18Q.js";import{b as U,a as W}from"./prompt.CRqnvq7m.js";import{u as z}from"./user.CJRpAqDR.js";import{_ as A}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./u-icon.B26jy-l1.js";/* empty css                                                               */import"./u-line.CTRc1Fj8.js";import"./u-loading-icon.DEWftbaH.js";import"./config.C9WjKJqE.js";const K=A({__name:"edit",setup(A){const K=z(),{name:L}=e(K),R=a({ToolName:"",OrderNumber:"",OperateType:2,workstationName:"",workstationDec:"",userAccount:L}),E=a(!1),G=a([]),H=a({ToolName:"",OrderNumber:"",OperateType:"3",CompName:"",workstationName:""}),Q=a(0);t((e=>{R.value.WorkStationName=e.workStation,R.value.workstationDec=e.workStationDec,R.value.line=e.line,H.value.workstationName=e.workStation})),l((()=>{o().select(".sect").boundingClientRect((e=>{Q.value=e.height-45+"px"})).exec()})),s((()=>{Z()}));const Y=()=>{h()},Z=()=>{q(H.value).then((e=>{G.value=e.content}))},B=()=>{R.value.OperateType="1",x({title:"提示",content:"是否一键下线？",success:e=>{e.confirm?M():e.cancel&&console.log("用户点击取消")}})},J=()=>{R.value.OperateType="2",M()},M=()=>{F(R.value).then((e=>{U(),R.value.ToolName="",Z(),g({title:e.msg,icon:"none"})})).catch((e=>{R.value.ToolName="",W()})),2==R.value.OperateType&&(E.value=!1,setTimeout((()=>{E.value=!0}),100))},P=()=>{j({onlyFromCamera:!0,scanType:["qrCode","barCode","datamatrix","pdf417"],success:e=>{R.value.ToolName=e.result,J()}})};return(e,a)=>{const t=u(i("up-input"),k),l=u(i("up-form-item"),w),o=u(i("uni-icons"),V),s=u(i("up-form"),C),h=m,x=u(i("uni-section"),O),g=u(i("uni-list-item"),D),j=u(i("uni-list"),S),q=T,F=N,U=u(i("up-button"),I);return p(),n(h,{class:"content"},{default:r((()=>[d(x,{title:"下线",type:"line"},{default:r((()=>[d(h,{class:"box"},{default:r((()=>[d(s,{labelAlign:"left",model:R.value,ref:"formRef",labelWidth:"80"},{default:r((()=>[d(l,{label:"产线"},{default:r((()=>[d(t,{modelValue:R.value.line,"onUpdate:modelValue":a[0]||(a[0]=e=>R.value.line=e),disabled:""},null,8,["modelValue"])])),_:1}),d(l,{label:"工位"},{default:r((()=>[d(t,{modelValue:R.value.workstationDec,"onUpdate:modelValue":a[1]||(a[1]=e=>R.value.workstationDec=e),disabled:""},null,8,["modelValue"])])),_:1}),d(l,{label:"治具编码"},{default:r((()=>[d(t,{placeholder:"请输入治具编码",onFocus:Y,focus:E.value,modelValue:R.value.ToolName,"onUpdate:modelValue":a[2]||(a[2]=e=>R.value.ToolName=e),onConfirm:J},{suffix:r((()=>[d(o,{type:"scan",color:"#bdbdbd",onClick:P,size:"24"})])),_:1},8,["focus","modelValue"])])),_:1})])),_:1},8,["model"])])),_:1})])),_:1}),d(x,{title:"清单",type:"line",class:"sect",style:{flex:"1"}},{right:r((()=>[c(" 已上线："),d(F,{style:{color:"red","font-weight":"bold"}},{default:r((()=>[c(f(G.value.length),1)])),_:1})])),default:r((()=>[d(q,{"scroll-y":"true",style:_({height:Q.value})},{default:r((()=>[d(j,null,{default:r((()=>[d(j,{border:!0},{default:r((()=>[(p(!0),v(y,null,b(G.value,(e=>(p(),n(g,{title:"治具编码:"+e.CompID,rightText:"工单:"+e.OrderID,note:"类型："+e.CompName},null,8,["title","rightText","note"])))),256))])),_:1})])),_:1})])),_:1},8,["style"])])),_:1}),d(h,{class:"",style:{position:"fixed",bottom:"10px",right:"10px"}},{default:r((()=>[d(U,{type:"primary",disabled:0==G.value.length,text:"一键下线",onClick:B,style:{width:"200rpx",height:"80rpx"}},null,8,["disabled"])])),_:1})])),_:1})}}},[["__scopeId","data-v-c542f63b"]]);export{K as default};
