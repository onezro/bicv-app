import{n as a,r as e,_ as t,p as l,q as s,L as o,v as u,x as i,d as r,w as n,i as c,o as d,e as m,f as p,t as f,E as _,y as v,z as x,F as y,aq as C,a9 as b,s as g,am as j,D as h,K as k}from"./index-BGMMYpLj.js";import{_ as N}from"./u-input.Coqpc1Jd.js";import{_ as w,a as A}from"./u-form.Q5Xs4RHm.js";import{_ as R}from"./uni-data-checkbox.BZqLlmt3.js";import{_ as T}from"./uni-icons.DYEN23k6.js";import{_ as D}from"./uni-section.CCDL9Cq2.js";import{_ as V}from"./u-button.Dr9wKWVi.js";import{_ as E}from"./uni-card.vMYNlN2z.js";import{c as L,L as I,U as K}from"./index.C_bR71-q.js";import{b as O,a as Y}from"./prompt.CRqnvq7m.js";import{u as P}from"./user.CJRpAqDR.js";import{_ as U}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./u-icon.B26jy-l1.js";/* empty css                                                               */import"./u-line.CTRc1Fj8.js";import"./uni-cloud.es.BPDmVjNF.js";import"./uni-load-more.BR-FgQCx.js";import"./u-loading-icon.DEWftbaH.js";import"./config.C9WjKJqE.js";const q=U({__name:"edit",setup(U){const q=P(),{name:F}=a(q),G=e({CarrierName:"",LoadType:"OK",Capacity:40,workstationName:"",workstationDec:"",userAccount:F.value,txnDate:""}),M=e([{text:"OK",value:"OK"},{text:"NG",value:"NG"}]),S=e(0),z=e(""),Q=e(!0),W=e([]);t((a=>{G.value.workstationName=a.workStation,G.value.workstationDec=a.workStationDec})),l((()=>{s().select(".sect").boundingClientRect((a=>{S.value=a.height-45+"px"})).exec()})),o((()=>{Z()}));const H=()=>{C()},Z=()=>{L(G.value.workstationName).then((a=>{null==a.content?W.value=[]:W.value=a.content}))},B=()=>{b({onlyFromCamera:!0,scanType:["qrCode","barCode","datamatrix","pdf417"],success:a=>{G.value.CarrierName=a.result,J()}})},J=()=>{let a=G.value.CarrierName;z.value=a,I(G.value).then((a=>{O(),Z(),g({title:a.msg,icon:"success"})})).catch((a=>{Y()})),G.value.CarrierName="",G.value.Capacity=40,Q.value=!1,setTimeout((()=>{Q.value=!0}),100)};return(a,e)=>{const t=u(i("up-input"),N),l=u(i("up-form-item"),w),s=u(i("uni-data-checkbox"),R),o=u(i("uni-icons"),T),C=c,b=u(i("up-form"),A),L=u(i("uni-section"),D),I=k,P=u(i("up-button"),V),U=u(i("uni-card"),E),q=j;return d(),r(C,{class:"content"},{default:n((()=>[m(L,{title:"周转箱上机",type:"line"},{default:n((()=>[m(C,{class:"box"},{default:n((()=>[m(b,{labelAlign:"right",model:G.value,ref:"formRef",labelWidth:"70"},{default:n((()=>[m(l,{label:"工位",prop:"workstationDec"},{default:n((()=>[m(t,{modelValue:G.value.workstationDec,"onUpdate:modelValue":e[0]||(e[0]=a=>G.value.workstationDec=a),disabled:!0,style:{"margin-left":"10px"}},null,8,["modelValue"])])),_:1}),m(l,{label:"类型",prop:"type"},{default:n((()=>[m(s,{modelValue:G.value.LoadType,"onUpdate:modelValue":e[1]||(e[1]=a=>G.value.LoadType=a),localdata:M.value,style:{"margin-left":"10px"}},null,8,["modelValue","localdata"])])),_:1}),m(l,{label:"扫描条码",prop:"barCode"},{default:n((()=>[m(t,{placeholder:"请扫描条码",onFocus:H,focus:Q.value,modelValue:G.value.CarrierName,"onUpdate:modelValue":e[2]||(e[2]=a=>G.value.CarrierName=a),onConfirm:J,style:{"margin-left":"10px"}},{suffix:n((()=>[m(o,{type:"scan",color:"#bdbdbd",onClick:B,size:"24"})])),_:1},8,["focus","modelValue"])])),_:1}),m(l,{label:"当前扫描"},{default:n((()=>[m(C,{class:"",style:{"margin-left":"10px"}},{default:n((()=>[p(f(z.value),1)])),_:1})])),_:1})])),_:1},8,["model"])])),_:1})])),_:1}),m(L,{title:"周转箱列表",class:"sect",type:"line",style:{flex:"1"}},{default:n((()=>[m(q,{"scroll-y":"true",style:_({height:S.value})},{default:n((()=>[(d(!0),v(y,null,x(W.value,(a=>(d(),r(U,{margin:"8px",padding:"5px",key:a.CARRIERNAME},{default:n((()=>[m(C,{class:"box-data"},{default:n((()=>[m(C,{class:"list"},{default:n((()=>[m(C,{class:"item"},{default:n((()=>[m(I,{class:"title"},{default:n((()=>[p("周转箱条码")])),_:1}),m(I,null,{default:n((()=>[p(f(a.CARRIERNAME),1)])),_:2},1024)])),_:2},1024),m(C,{class:"item"},{default:n((()=>[m(I,{class:"title"},{default:n((()=>[p("类型")])),_:1}),m(I,{class:h(["OK"===a.LOADTYPE?"ok":"ng"])},{default:n((()=>[p(f(a.LOADTYPE),1)])),_:2},1032,["class"])])),_:2},1024)])),_:2},1024),m(C,{class:"list"},{default:n((()=>[m(C,{class:"item"},{default:n((()=>[m(I,{class:"title"},{default:n((()=>[p("已装载")])),_:1}),m(I,null,{default:n((()=>[p(f(a.QTY),1)])),_:2},1024)])),_:2},1024),m(C,{class:"item"},{default:n((()=>[m(I,{class:"title"},{default:n((()=>[p("容量")])),_:1}),m(I,null,{default:n((()=>[p(f(a.CAPACITY),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),m(C,{class:"bt"},{default:n((()=>[m(P,{type:"primary",style:{margin:"0",width:"60px",height:"25px"},text:"下机",onClick:e=>{return t=a.CARRIERNAME,void(a.QTY>0?g({title:"周转箱已装载，不可卸载！！！",icon:"none"}):K(t).then((a=>{Z(),O(),g({title:a.msg,icon:"success"})})).catch((()=>{Y()})));var t}},null,8,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["style"])])),_:1})])),_:1})}}},[["__scopeId","data-v-4f9641a1"]]);export{q as default};
