import{M as e,N as t,O as a,P as o,X as n,S as r,Q as i,b5 as l,o as s,d,w as u,e as h,E as c,f,t as g,H as p,D as m,a4 as y,K as x,i as b}from"./index-BGMMYpLj.js";import{_ as S}from"./_plugin-vue_export-helper.BCo6x5W8.js";const C=S({name:"u-textarea",mixins:[a,o,e({props:{value:{type:[String,Number],default:()=>t.textarea.value},modelValue:{type:[String,Number],default:()=>t.textarea.value},placeholder:{type:[String,Number],default:()=>t.textarea.placeholder},placeholderClass:{type:String,default:()=>t.input.placeholderClass},placeholderStyle:{type:[String,Object],default:()=>t.input.placeholderStyle},height:{type:[String,Number],default:()=>t.textarea.height},confirmType:{type:String,default:()=>t.textarea.confirmType},disabled:{type:Boolean,default:()=>t.textarea.disabled},count:{type:Boolean,default:()=>t.textarea.count},focus:{type:Boolean,default:()=>t.textarea.focus},autoHeight:{type:Boolean,default:()=>t.textarea.autoHeight},fixed:{type:Boolean,default:()=>t.textarea.fixed},cursorSpacing:{type:Number,default:()=>t.textarea.cursorSpacing},cursor:{type:[String,Number],default:()=>t.textarea.cursor},showConfirmBar:{type:Boolean,default:()=>t.textarea.showConfirmBar},selectionStart:{type:Number,default:()=>t.textarea.selectionStart},selectionEnd:{type:Number,default:()=>t.textarea.selectionEnd},adjustPosition:{type:Boolean,default:()=>t.textarea.adjustPosition},disableDefaultPadding:{type:Boolean,default:()=>t.textarea.disableDefaultPadding},holdKeyboard:{type:Boolean,default:()=>t.textarea.holdKeyboard},maxlength:{type:[String,Number],default:()=>t.textarea.maxlength},border:{type:String,default:()=>t.textarea.border},formatter:{type:[Function,null],default:()=>t.textarea.formatter},ignoreCompositionEvent:{type:Boolean,default:!0}}})],data:()=>({innerValue:"",focused:!1,firstChange:!0,changeFromInner:!1,innerFormatter:e=>e}),created(){},watch:{modelValue:{immediate:!0,handler(e,t){this.innerValue=e,!1===this.firstChange&&!1===this.changeFromInner&&this.valueChange(),this.firstChange=!1,this.changeFromInner=!1}}},computed:{textareaClass(){let e=[],{border:t,disabled:a}=this;return"surround"===t&&(e=e.concat(["u-border","u-textarea--radius"])),"bottom"===t&&(e=e.concat(["u-border-bottom","u-textarea--no-radius"])),a&&e.push("u-textarea--disabled"),e.join(" ")},textareaStyle(){return n({},r(this.customStyle))}},emits:["update:modelValue","linechange","focus","blur","change","confirm","keyboardheightchange"],methods:{addStyle:r,addUnit:i,setFormatter(e){this.innerFormatter=e},onFocus(e){this.$emit("focus",e)},onBlur(e){this.$emit("blur",e),l(this,"blur")},onLinechange(e){this.$emit("linechange",e)},onInput(e){let{value:t=""}=e.detail||{};const a=(this.formatter||this.innerFormatter)(t);this.innerValue=t,this.$nextTick((()=>{this.innerValue=a,this.valueChange()}))},valueChange(){const e=this.innerValue;this.$nextTick((()=>{this.$emit("update:modelValue",e),this.changeFromInner=!0,this.$emit("change",e),l(this,"change")}))},onConfirm(e){this.$emit("confirm",e)},onKeyboardheightchange(e){this.$emit("keyboardheightchange",e)}}},[["render",function(e,t,a,o,n,r){const i=y,l=x,S=b;return s(),d(S,{class:m(["u-textarea",r.textareaClass]),style:c([r.textareaStyle])},{default:u((()=>[h(i,{class:"u-textarea__field",value:n.innerValue,style:c({height:r.addUnit(e.height)}),placeholder:e.placeholder,"placeholder-style":r.addStyle(e.placeholderStyle,"string"),"placeholder-class":e.placeholderClass,disabled:e.disabled,focus:e.focus,autoHeight:e.autoHeight,fixed:e.fixed,cursorSpacing:e.cursorSpacing,cursor:e.cursor,showConfirmBar:e.showConfirmBar,selectionStart:e.selectionStart,selectionEnd:e.selectionEnd,adjustPosition:e.adjustPosition,disableDefaultPadding:e.disableDefaultPadding,holdKeyboard:e.holdKeyboard,maxlength:e.maxlength,"confirm-type":e.confirmType,ignoreCompositionEvent:e.ignoreCompositionEvent,onFocus:r.onFocus,onBlur:r.onBlur,onLinechange:r.onLinechange,onInput:r.onInput,onConfirm:r.onConfirm,onKeyboardheightchange:r.onKeyboardheightchange},null,8,["value","style","placeholder","placeholder-style","placeholder-class","disabled","focus","autoHeight","fixed","cursorSpacing","cursor","showConfirmBar","selectionStart","selectionEnd","adjustPosition","disableDefaultPadding","holdKeyboard","maxlength","confirm-type","ignoreCompositionEvent","onFocus","onBlur","onLinechange","onInput","onConfirm","onKeyboardheightchange"]),e.count?(s(),d(l,{key:0,class:"u-textarea__count",style:c({"background-color":e.disabled?"transparent":"#fff"})},{default:u((()=>[f(g(n.innerValue.length)+"/"+g(e.maxlength),1)])),_:1},8,["style"])):p("",!0)])),_:1},8,["class","style"])}],["__scopeId","data-v-aafb8306"]]);export{C as _};
