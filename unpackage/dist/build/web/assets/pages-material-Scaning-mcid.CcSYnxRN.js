import{r as a,_ as e,aD as l,ao as t,aE as s,C as o,v as u,x as i,d,w as m,i as n,o as r,e as p,f as c,t as v,H as _,ae as f}from"./index-BGMMYpLj.js";import{_ as I}from"./u-input.Coqpc1Jd.js";import{_ as b,a as g}from"./u-form.Q5Xs4RHm.js";import{_ as h}from"./u-button.Dr9wKWVi.js";import{_ as x}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./u-icon.B26jy-l1.js";/* empty css                                                               */import"./u-line.CTRc1Fj8.js";import"./u-loading-icon.DEWftbaH.js";const j=x({__name:"mcid",setup(x){const j=a(""),y=a({mcId:"",ip:"172.31.70.87"}),C=a(),S=a(!1),$=a("");e((a=>{j.value=l("NIS_IPFORM"),C.value=l("NIS_Machine"),y.value.mcId=void 0!==a.mcId?a.mcId:C.value.mcId,""===y.value.mcId&&void 0===y.value.mcId||(console.log(y.value.mcId),k())}));const k=()=>{S.value=!1,t({url:`http://${j.value.ip}:8014/api/machines/${y.value.mcId}/webapplications?DisableErrorHandling=`,method:"GET"}).then((a=>{200===a.statusCode?t({url:`http://${j.value.ip}:5000/api/v1.0/applications/register`,method:"POST",data:y.value}).then((a=>{200===a.statusCode?(s("NIS_Machine",a.data),o({url:"/pages/material/Scaning/line"})):(S.value=!0,$.value=`无法注册这个器件  ${y.value.mcId}`)})):(S.value=!0,$.value=`无法注册这个器件  ${a.data.Message}`)}))},w=()=>{S.value=!1},D=()=>{f({delta:1})};return(a,e)=>{const l=n,t=u(i("up-input"),I),s=u(i("up-form-item"),b),o=u(i("up-button"),h),f=u(i("up-form"),g);return r(),d(l,{class:"content"},{default:m((()=>[p(l,{class:"box"},{default:m((()=>[p(l,{class:"title"},{default:m((()=>[c("输入或扫描资源ID")])),_:1}),p(f,{model:y.value,ref:"form1","label-width":"100",labelPosition:"top"},{default:m((()=>[p(s,{label:"资源ID",prop:"mcId",borderBottom:!0},{default:m((()=>[p(t,{modelValue:y.value.mcId,"onUpdate:modelValue":e[0]||(e[0]=a=>y.value.mcId=a),adjustPosition:!0,type:"number",border:"none",onConfirm:k},null,8,["modelValue"])])),_:1}),p(s,null,{default:m((()=>[p(o,{plain:!0,text:"上一步",onClick:D}),p(o,{type:"primary",disabled:""==y.value.mcId||null==y.value.mcId,text:"确定",onClick:k},null,8,["disabled"])])),_:1})])),_:1},8,["model"])])),_:1}),S.value?(r(),d(l,{key:0,class:"msg-title"},{default:m((()=>[p(l,{class:"msg-box"},{default:m((()=>[p(l,{class:"",style:{"margin-left":"15px"}},{default:m((()=>[c(v($.value),1)])),_:1}),p(l,{class:"",style:{"margin-right":"10px"}},{default:m((()=>[p(o,{type:"error",text:"关闭",size:"small",onClick:w,style:{width:"40px"}})])),_:1})])),_:1})])),_:1})):_("",!0)])),_:1})}}},[["__scopeId","data-v-27e4fd56"]]);export{j as default};
