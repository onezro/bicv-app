import{v as e,x as t,o as s,d as o,w as a,e as i,D as l,E as r,H as n,G as c,y as u,F as d,a4 as h,I as p,i as m,n as f,r as y,a5 as g,_ as b,a6 as v,a7 as x,a8 as S,z as C,u as _,a9 as k,a as I,s as w,f as $,t as B,A as j}from"./index-BGMMYpLj.js";import{_ as F}from"./uni-icons.DYEN23k6.js";import{_ as V}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{_ as T}from"./u-button.Dr9wKWVi.js";import{b as M,c as P}from"./login.B4FiVUnw.js";import{a as E,b as N}from"./prompt.CRqnvq7m.js";import{m as z}from"./mes.CHEcPLOc.js";import"./u-loading-icon.DEWftbaH.js";import"./u-icon.B26jy-l1.js";/* empty css                                                               */import"./config.C9WjKJqE.js";function O(e){let t="";for(let s in e){t+=`${s}:${e[s]};`}return t}const H=V({name:"uni-easyinput",emits:["click","iconClick","update:modelValue","input","focus","blur","confirm","clear","eyes","change","keyboardheightchange"],model:{prop:"modelValue",event:"update:modelValue"},options:{virtualHost:!0},inject:{form:{from:"uniForm",default:null},formItem:{from:"uniFormItem",default:null}},props:{name:String,value:[Number,String],modelValue:[Number,String],type:{type:String,default:"text"},clearable:{type:Boolean,default:!0},autoHeight:{type:Boolean,default:!1},placeholder:{type:String,default:" "},placeholderStyle:String,focus:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},maxlength:{type:[Number,String],default:140},confirmType:{type:String,default:"done"},clearSize:{type:[Number,String],default:24},inputBorder:{type:Boolean,default:!0},prefixIcon:{type:String,default:""},suffixIcon:{type:String,default:""},trim:{type:[Boolean,String],default:!1},cursorSpacing:{type:Number,default:0},passwordIcon:{type:Boolean,default:!0},adjustPosition:{type:Boolean,default:!0},primaryColor:{type:String,default:"#2979ff"},styles:{type:Object,default:()=>({color:"#333",backgroundColor:"#fff",disableColor:"#F7F6F6",borderColor:"#e5e5e5"})},errorMessage:{type:[String,Boolean],default:""}},data:()=>({focused:!1,val:"",showMsg:"",border:!1,isFirstBorder:!1,showClearIcon:!1,showPassword:!1,focusShow:!1,localMsg:"",isEnter:!1}),computed:{isVal(){const e=this.val;return!(!e&&0!==e)},msg(){return this.localMsg||this.errorMessage},inputMaxlength(){return Number(this.maxlength)},boxStyle(){return`color:${this.inputBorder&&this.msg?"#e43d33":this.styles.color};`},inputContentClass(){return function(e){let t="";for(let s in e)e[s]&&(t+=`${s} `);return t}({"is-input-border":this.inputBorder,"is-input-error-border":this.inputBorder&&this.msg,"is-textarea":"textarea"===this.type,"is-disabled":this.disabled,"is-focused":this.focusShow})},inputContentStyle(){const e=this.focusShow?this.primaryColor:this.styles.borderColor;return O({"border-color":(this.inputBorder&&this.msg?"#dd524d":e)||"#e5e5e5","background-color":this.disabled?this.styles.disableColor:this.styles.backgroundColor})},inputStyle(){return O({"padding-right":"password"===this.type||this.clearable||this.prefixIcon?"":"10px","padding-left":this.prefixIcon?"":"10px"})}},watch:{value(e){this.val=e},modelValue(e){this.val=e},focus(e){this.$nextTick((()=>{this.focused=this.focus,this.focusShow=this.focus}))}},created(){this.init(),this.form&&this.formItem&&this.$watch("formItem.errMsg",(e=>{this.localMsg=e}))},mounted(){this.$nextTick((()=>{this.focused=this.focus,this.focusShow=this.focus}))},methods:{init(){this.value||0===this.value?this.val=this.value:this.modelValue||0===this.modelValue||""===this.modelValue?this.val=this.modelValue:this.val=null},onClickIcon(e){this.$emit("iconClick",e)},onEyes(){this.showPassword=!this.showPassword,this.$emit("eyes",this.showPassword)},onInput(e){let t=e.detail.value;this.trim&&("boolean"==typeof this.trim&&this.trim&&(t=this.trimStr(t)),"string"==typeof this.trim&&(t=this.trimStr(t,this.trim))),this.errMsg&&(this.errMsg=""),this.val=t,this.$emit("input",t),this.$emit("update:modelValue",t)},onFocus(){this.$nextTick((()=>{this.focused=!0})),this.$emit("focus",null)},_Focus(e){this.focusShow=!0,this.$emit("focus",e)},onBlur(){this.focused=!1,this.$emit("blur",null)},_Blur(e){if(e.detail.value,this.focusShow=!1,this.$emit("blur",e),!1===this.isEnter&&this.$emit("change",this.val),this.form&&this.formItem){const{validateTrigger:e}=this.form;"blur"===e&&this.formItem.onFieldChange()}},onConfirm(e){this.$emit("confirm",this.val),this.isEnter=!0,this.$emit("change",this.val),this.$nextTick((()=>{this.isEnter=!1}))},onClear(e){this.val="",this.$emit("input",""),this.$emit("update:modelValue",""),this.$emit("clear")},onkeyboardheightchange(e){this.$emit("keyboardheightchange",e)},trimStr:(e,t="both")=>"both"===t?e.trim():"left"===t?e.trimLeft():"right"===t?e.trimRight():"start"===t?e.trimStart():"end"===t?e.trimEnd():"all"===t?e.replace(/\s+/g,""):e}},[["render",function(f,y,g,b,v,x){const S=e(t("uni-icons"),F),C=h,_=p,k=m;return s(),o(k,{class:l(["uni-easyinput",{"uni-easyinput-error":x.msg}]),style:r(x.boxStyle)},{default:a((()=>[i(k,{class:l(["uni-easyinput__content",x.inputContentClass]),style:r(x.inputContentStyle)},{default:a((()=>[g.prefixIcon?(s(),o(S,{key:0,class:"content-clear-icon",type:g.prefixIcon,color:"#c0c4cc",onClick:y[0]||(y[0]=e=>x.onClickIcon("prefix")),size:"22"},null,8,["type"])):n("",!0),c(f.$slots,"left",{},void 0,!0),"textarea"===g.type?(s(),o(C,{key:1,class:l(["uni-easyinput__content-textarea",{"input-padding":g.inputBorder}]),name:g.name,value:v.val,placeholder:g.placeholder,placeholderStyle:g.placeholderStyle,disabled:g.disabled,"placeholder-class":"uni-easyinput__placeholder-class",maxlength:x.inputMaxlength,focus:v.focused,autoHeight:g.autoHeight,"cursor-spacing":g.cursorSpacing,"adjust-position":g.adjustPosition,onInput:x.onInput,onBlur:x._Blur,onFocus:x._Focus,onConfirm:x.onConfirm,onKeyboardheightchange:x.onkeyboardheightchange},null,8,["class","name","value","placeholder","placeholderStyle","disabled","maxlength","focus","autoHeight","cursor-spacing","adjust-position","onInput","onBlur","onFocus","onConfirm","onKeyboardheightchange"])):(s(),o(_,{key:2,type:"password"===g.type?"text":g.type,class:"uni-easyinput__content-input",style:r(x.inputStyle),name:g.name,value:v.val,password:!v.showPassword&&"password"===g.type,placeholder:g.placeholder,placeholderStyle:g.placeholderStyle,"placeholder-class":"uni-easyinput__placeholder-class",disabled:g.disabled,maxlength:x.inputMaxlength,focus:v.focused,confirmType:g.confirmType,"cursor-spacing":g.cursorSpacing,"adjust-position":g.adjustPosition,onFocus:x._Focus,onBlur:x._Blur,onInput:x.onInput,onConfirm:x.onConfirm,onKeyboardheightchange:x.onkeyboardheightchange},null,8,["type","style","name","value","password","placeholder","placeholderStyle","disabled","maxlength","focus","confirmType","cursor-spacing","adjust-position","onFocus","onBlur","onInput","onConfirm","onKeyboardheightchange"])),"password"===g.type&&g.passwordIcon?(s(),u(d,{key:3},[x.isVal?(s(),o(S,{key:0,class:l(["content-clear-icon",{"is-textarea-icon":"textarea"===g.type}]),type:v.showPassword?"eye-slash-filled":"eye-filled",size:22,color:v.focusShow?g.primaryColor:"#c0c4cc",onClick:x.onEyes},null,8,["class","type","color","onClick"])):n("",!0)],64)):n("",!0),g.suffixIcon?(s(),u(d,{key:4},[g.suffixIcon?(s(),o(S,{key:0,class:"content-clear-icon",type:g.suffixIcon,color:"#c0c4cc",onClick:y[1]||(y[1]=e=>x.onClickIcon("suffix")),size:"22"},null,8,["type"])):n("",!0)],64)):(s(),u(d,{key:5},[g.clearable&&x.isVal&&!g.disabled&&"textarea"!==g.type?(s(),o(S,{key:0,class:l(["content-clear-icon",{"is-textarea-icon":"textarea"===g.type}]),type:"clear",size:g.clearSize,color:x.msg?"#dd524d":v.focusShow?g.primaryColor:"#c0c4cc",onClick:x.onClear},null,8,["class","size","color","onClick"])):n("",!0)],64)),c(f.$slots,"right",{},void 0,!0)])),_:3},8,["class","style"])])),_:3},8,["class","style"])}],["__scopeId","data-v-5763a810"]]),K=V({__name:"index",setup(r){const c=z(),{ticketNumber:h,tagName:p,interfaceData:F}=f(c),V=y(""),O=y(""),K=y(""),L=y([]),D=g((()=>h.value.filter((e=>-1!==e.InspectOrder.toLowerCase().indexOf(K.value.toLowerCase())))));b((e=>{v((()=>{S({title:p.value[e.type]+"任务单"})})),V.value=p.value[e.type],O.value=e.type})),x((()=>{G()}));const G=()=>{M(F.value).then((e=>{let t=e.content;""!==t[0].InspectOrder&&(t=t.filter((e=>"C"!=e.Status)),c.SET_ticketNumber(t),L.value=h.value)}))},q=()=>{};return(r,h)=>{const p=e(t("uni-easyinput"),H),f=m,y=e(t("up-button"),T);return s(),o(f,{class:"firstInspection"},{default:a((()=>[i(f,{class:"search",style:{padding:"5rpx  15rpx"}},{default:a((()=>[i(p,{prefixIcon:"search",trim:"all",modelValue:K.value,"onUpdate:modelValue":h[0]||(h[0]=e=>K.value=e),placeholder:"任务单搜索",onClear:q},null,8,["modelValue"])])),_:1}),(s(!0),u(d,null,C(D.value,((e,t)=>{return s(),o(f,{class:l(["card",(r=e.Status,"P"==r?"waring":"C"==r?"finsh":void 0)]),onClick:t=>{return s=e.InspectOrder,c.SET_interfaceData({inspect:s}),void j({url:"/pages/mes/tickets/index?order="+s+"&type="+O.value});var s},key:e.order},{default:a((()=>[i(f,{class:""},{default:a((()=>[$(B(t+1)+"."+B(e.InspectOrder),1)])),_:2},1024),"I"==e.Status?(s(),o(f,{key:0,class:""},{default:a((()=>[$("未开始")])),_:1})):n("",!0),"P"==e.Status?(s(),o(f,{key:1,class:""},{default:a((()=>[$("进行中")])),_:1})):n("",!0)])),_:2},1032,["onClick","class"]);var r})),128)),"FI"==_(F).inspectType?(s(),o(f,{key:0,class:"btn-box"},{default:a((()=>[i(y,{type:"primary",icon:"camera",style:{width:"120rpx",height:"60rpx"},onClick:h[1]||(h[1]=e=>{k({onlyFromCamera:!0,scanType:["qrCode","barCode"],success:e=>{P({inspect:"12344",inspectType:"FI",workOrder:e.result}).then((e=>{console.log(e),"NG"==e.Status?(E(),I({title:"提示",content:e.Message,success:e=>{e.confirm||e.cancel&&console.log("用户点击取消")}})):(N(),w({title:"创建成功",icon:"success"})),G()}))}})})})])),_:1})):n("",!0)])),_:1})}}},[["__scopeId","data-v-10833cd8"]]);export{K as default};
