import{n as e,r as a,_ as o,p as t,q as l,L as s,aq as u,v as i,x as r,d as n,w as m,i as d,o as p,e as c,f,t as _,E as v,y as b,z as y,F as N,s as h,a9 as j,am as g,K as k}from"./index-BGMMYpLj.js";import{_ as x}from"./u-input.Coqpc1Jd.js";import{_ as T,a as w}from"./u-form.Q5Xs4RHm.js";import{_ as V}from"./uni-icons.DYEN23k6.js";import{_ as C}from"./uni-section.CCDL9Cq2.js";import{_ as D}from"./uni-list-item.SqYlFseI.js";import{_ as S}from"./uni-list.BH0W-wlO.js";import{Q as O,b as I}from"./work.CbAcu18Q.js";import{b as W,a as q}from"./prompt.CRqnvq7m.js";import{u as F}from"./user.CJRpAqDR.js";import{_ as U}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./u-icon.B26jy-l1.js";/* empty css                                                               */import"./u-line.CTRc1Fj8.js";import"./config.C9WjKJqE.js";const z=U({__name:"edit",setup(U){const z=F(),{name:A}=e(z),E=a({ToolName:"",WorkStationName:"",workStationDec:"",line:"",EmployeeName:A,OrderNumber:"",OperateType:"",userAccount:A}),K=a(!1),L=a([]),R=a({ToolName:"",OrderNumber:"",OperateType:"3",CompName:"",workstationName:""}),G=a(0);o((e=>{E.value.WorkStationName=e.workStation,E.value.workstationDec=e.workStationDec,E.value.line=e.line,R.value.workstationName=e.workStation})),t((()=>{l().select(".sect").boundingClientRect((e=>{G.value=e.height-40+"px"})).exec()})),s((()=>{H(),Z()}));const H=()=>{K.value=!1,setTimeout((()=>{K.value=!0,u()}),100)},Q=()=>{u()},Z=()=>{O(R.value).then((e=>{L.value=e.content}))},B=()=>{I(E.value).then((e=>{Z(),W(),E.value.ToolName="",h({title:e.msg,icon:"none",duration:2e3})})).catch((e=>{E.value.ToolName="",q()})),H()},J=()=>{j({onlyFromCamera:!0,scanType:["qrCode","barCode","datamatrix","pdf417"],success:e=>{E.value.ToolName=e.result}})};return(e,a)=>{const o=i(r("up-input"),x),t=i(r("up-form-item"),T),l=i(r("uni-icons"),V),s=i(r("up-form"),w),u=d,h=i(r("uni-section"),C),j=i(r("uni-list-item"),D),O=i(r("uni-list"),S),I=g,W=k;return p(),n(u,{class:"content"},{default:m((()=>[c(h,{title:"上线",type:"line"},{default:m((()=>[c(u,{class:"box"},{default:m((()=>[c(s,{labelAlign:"left",model:E.value,ref:"formRef",labelWidth:"80"},{default:m((()=>[c(t,{label:"产线"},{default:m((()=>[c(o,{modelValue:E.value.line,"onUpdate:modelValue":a[0]||(a[0]=e=>E.value.line=e),disabled:""},null,8,["modelValue"])])),_:1}),c(t,{label:"工位"},{default:m((()=>[c(o,{modelValue:E.value.workstationDec,"onUpdate:modelValue":a[1]||(a[1]=e=>E.value.workstationDec=e),disabled:""},null,8,["modelValue"])])),_:1}),c(t,{label:"治具编码"},{default:m((()=>[c(o,{placeholder:"请输入治具编码",onFocus:Q,focus:K.value,modelValue:E.value.ToolName,"onUpdate:modelValue":a[2]||(a[2]=e=>E.value.ToolName=e),onConfirm:B},{suffix:m((()=>[c(l,{type:"scan",color:"#bdbdbd",onClick:J,size:"24"})])),_:1},8,["focus","modelValue"])])),_:1})])),_:1},8,["model"])])),_:1})])),_:1}),c(h,{title:"已上线",type:"line",class:"sect",style:{flex:"1"}},{right:m((()=>[f(" 已上线："),c(W,{style:{color:"red","font-weight":"bold"}},{default:m((()=>[f(_(L.value.length),1)])),_:1})])),default:m((()=>[c(I,{"scroll-y":"true",style:v({height:G.value})},{default:m((()=>[c(O,{border:!0},{default:m((()=>[(p(!0),b(N,null,y(L.value,(e=>(p(),n(j,{title:"治具编码:"+e.CompID,rightText:"工单:"+e.OrderID,note:"类型："+e.CompName},null,8,["title","rightText","note"])))),256))])),_:1})])),_:1},8,["style"])])),_:1})])),_:1})}}},[["__scopeId","data-v-940c5130"]]);export{z as default};
