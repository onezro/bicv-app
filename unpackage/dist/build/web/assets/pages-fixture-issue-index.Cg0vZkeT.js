import{M as e,N as t,O as a,P as o,S as l,Q as s,aq as r,v as n,x as c,o as u,d as i,w as d,e as h,E as p,G as f,f as m,t as y,H as _,D as b,J as g,K as v,i as k,I as w,av as x,aw as C,a5 as S,r as I,ax as j,ay as $,ap as B,al as A,az as N,a7 as T,aA as O,aB as V,aC as z,y as F,z as G,F as H,s as Q,A as q}from"./index-BGMMYpLj.js";import{_ as D}from"./u-icon.B26jy-l1.js";import{_ as L}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{_ as P,a as M}from"./u-form.Q5Xs4RHm.js";import{_ as U}from"./uni-card.vMYNlN2z.js";import{_ as E}from"./uni-load-more.BR-FgQCx.js";import{G as R}from"./work.CbAcu18Q.js";/* empty css                                                               */import"./u-line.CTRc1Fj8.js";import"./config.C9WjKJqE.js";const J=L({name:"u-search",mixins:[a,o,e({props:{shape:{type:String,default:()=>t.search.shape},bgColor:{type:String,default:()=>t.search.bgColor},placeholder:{type:String,default:()=>t.search.placeholder},clearabled:{type:Boolean,default:()=>t.search.clearabled},focus:{type:Boolean,default:()=>t.search.focus},showAction:{type:Boolean,default:()=>t.search.showAction},actionStyle:{type:Object,default:()=>t.search.actionStyle},actionText:{type:String,default:()=>t.search.actionText},inputAlign:{type:String,default:()=>t.search.inputAlign},inputStyle:{type:Object,default:()=>t.search.inputStyle},disabled:{type:Boolean,default:()=>t.search.disabled},borderColor:{type:String,default:()=>t.search.borderColor},searchIconColor:{type:String,default:()=>t.search.searchIconColor},color:{type:String,default:()=>t.search.color},placeholderColor:{type:String,default:()=>t.search.placeholderColor},searchIcon:{type:String,default:()=>t.search.searchIcon},searchIconSize:{type:[Number,String],default:()=>t.search.searchIconSize},margin:{type:String,default:()=>t.search.margin},animation:{type:Boolean,default:()=>t.search.animation},modelValue:{type:String,default:()=>t.search.value},value:{type:String,default:()=>t.search.value},maxlength:{type:[String,Number],default:()=>t.search.maxlength},height:{type:[String,Number],default:()=>t.search.height},label:{type:[String,Number,null],default:()=>t.search.label},adjustPosition:{type:Boolean,default:()=>!0},autoBlur:{type:Boolean,default:()=>!1}}})],data(){return{keyword:"",showClear:!1,show:!1,focused:this.focus}},watch:{keyword(e){this.$emit("update:modelValue",e),this.$emit("change",e)},modelValue:{immediate:!0,handler(e){this.keyword=e}}},computed:{showActionBtn(){return!this.animation&&this.showAction}},emits:["clear","search","custom","focus","blur","click","clickIcon","update:modelValue","change"],methods:{addStyle:l,addUnit:s,inputChange(e){this.keyword=e.detail.value},clear(){this.keyword="",this.$nextTick((()=>{this.$emit("clear")}))},search(e){this.$emit("search",e.detail.value);try{r()}catch(t){}},custom(){this.$emit("custom",this.keyword);try{r()}catch(e){}},getFocus(){this.focused=!0,this.animation&&this.showAction&&(this.show=!0),this.$emit("focus",this.keyword)},blur(){setTimeout((()=>{this.focused=!1}),100),this.show=!1,this.$emit("blur",this.keyword)},clickHandler(){this.disabled&&this.$emit("click")},clickIcon(e){this.$emit("clickIcon",this.keyword);try{r()}catch(t){}}}},[["render",function(e,t,a,o,l,s){const r=v,x=n(c("u-icon"),D),C=k,S=w;return u(),i(C,{class:"u-search",onClick:s.clickHandler,style:p([{margin:e.margin},s.addStyle(e.customStyle)])},{default:d((()=>[h(C,{class:"u-search__content",style:p({backgroundColor:e.bgColor,borderRadius:"round"==e.shape?"100px":"4px",borderColor:e.borderColor})},{default:d((()=>[e.$slots.label||null!==e.label?f(e.$slots,"label",{key:0},(()=>[h(r,{class:"u-search__content__label"},{default:d((()=>[m(y(e.label),1)])),_:1})]),!0):_("",!0),h(C,{class:"u-search__content__icon"},{default:d((()=>[h(x,{onClick:s.clickIcon,size:e.searchIconSize,name:e.searchIcon,color:e.searchIconColor?e.searchIconColor:e.color},null,8,["onClick","size","name","color"])])),_:1}),h(S,{"confirm-type":"search",onBlur:s.blur,value:l.keyword,onConfirm:s.search,onInput:s.inputChange,disabled:e.disabled,onFocus:s.getFocus,focus:e.focus,maxlength:e.maxlength,"adjust-position":e.adjustPosition,"auto-blur":e.autoBlur,"placeholder-class":"u-search__content__input--placeholder",placeholder:e.placeholder,"placeholder-style":`color: ${e.placeholderColor}`,class:"u-search__content__input",type:"text",style:p([{textAlign:e.inputAlign,color:e.color,backgroundColor:e.bgColor,height:s.addUnit(e.height)},e.inputStyle])},null,8,["onBlur","value","onConfirm","onInput","disabled","onFocus","focus","maxlength","adjust-position","auto-blur","placeholder","placeholder-style","style"]),l.keyword&&e.clearabled&&l.focused?(u(),i(C,{key:1,class:"u-search__content__icon u-search__content__close",onClick:s.clear},{default:d((()=>[h(x,{name:"close",size:"11",color:"#ffffff",customStyle:"line-height: 12px"})])),_:1},8,["onClick"])):_("",!0)])),_:3},8,["style"]),h(r,{style:p([e.actionStyle]),class:b(["u-search__action",[(s.showActionBtn||l.show)&&"u-search__action--active"]]),onClick:g(s.custom,["stop","prevent"])},{default:d((()=>[m(y(e.actionText),1)])),_:1},8,["style","class","onClick"])])),_:3},8,["onClick","style"])}],["__scopeId","data-v-aa86678d"]]);const K=e=>({type:Number,default:e}),W=e=>({type:String,default:e}),Z={customStyle:W(""),customClass:W("")},X=Symbol("wd-row"),Y={...Z,gutter:K(0)},ee=L($({name:"wd-col",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{...Z,span:K(24),offset:K(0)},setup(e){const t=e,a=I(""),{parent:o}=function(e){const t=x(e,null);if(t){const e=j(),{link:a,unlink:o,internalChildren:l}=t;return a(e),C((()=>o(e))),{parent:t,index:S((()=>l.indexOf(e)))}}return{parent:null,index:I(-1)}}(X),l=S((()=>o&&o.props.gutter||0));return B([()=>t.span,()=>t.offset],(()=>{!function(){const{span:e,offset:a}=t;(e<0||a<0)&&console.error("[wot-design] warning(wd-col): attribute span/offset must be greater than or equal to 0")}()})),B((()=>l.value),(e=>{!function(e){const t=e/2+"px",o=e>0?`padding-left: ${t}; padding-right: ${t};background-clip: content-box;`:"";o!==a.value&&(a.value=o)}(e||0)}),{deep:!0,immediate:!0}),(e,t)=>{const o=k;return u(),i(o,{class:b(["wd-col",e.span&&"wd-col__"+e.span,e.offset&&"wd-col__offset-"+e.offset,e.customClass]),style:p(a.value)},{default:d((()=>[f(e.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-04bf6b84"]]);const te=(e,t)=>{const a=e.indexOf(t);return-1===a?e.findIndex((e=>void 0!==t.key&&null!==t.key&&e.type===t.type&&e.key===t.key)):a};function ae(e,t,a){const o=e&&e.subTree&&e.subTree.children?function(e){const t=[],a=e=>{Array.isArray(e)&&e.forEach((e=>{var o,l;(l=e)&&!0===l.__v_isVNode&&(t.push(e),(null==(o=e.component)?void 0:o.subTree)&&(t.push(e.component.subTree),a(e.component.subTree.children)),e.children&&a(e.children))}))};return a(e),t}(e.subTree.children):[];a.sort(((e,t)=>te(o,e.vnode)-te(o,t.vnode)));const l=a.map((e=>e.proxy));t.sort(((e,t)=>l.indexOf(e)-l.indexOf(t)))}function oe(e){return Number.isNaN(Number(e))?`${e}`:`${e}px`}function le(e){return"string"===function(e){const t=Object.prototype.toString.call(e).match(/\[object (\w+)\]/);return t&&t.length?t[1].toLowerCase():""}(e)}function se(e){return t=e,("function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t))?e.filter((function(e){return null!=e&&""!==e})).map((function(e){return se(e)})).join(";"):le(e)?e:function(e){return"[object Object]"===Object.prototype.toString.call(e)||"object"==typeof e}(e)?Object.keys(e).filter((function(t){return null!=e[t]&&""!==e[t]})).map((function(t){return[(a=t,a.replace(/[A-Z]/g,(function(e){return"-"+e})).toLowerCase()),e[t]].join(":");var a})).join(";"):"";var t}const re=L($({name:"wd-row",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:Y,setup(e){const t=e,{linkChildren:a}=function(e){const t=A([]),a=A([]),o=j();return{children:t,linkChildren:l=>{N(e,Object.assign({link:e=>{e.proxy&&(a.push(e),t.push(e.proxy),ae(o,t,a))},unlink:e=>{const o=a.indexOf(e);t.splice(o,1),a.splice(o,1)},children:t,internalChildren:a},l))}}}(X);a({props:t});const o=S((()=>{const e={},{gutter:a}=t;return a<0?console.error("[wot design] warning(wd-row): attribute gutter must be greater than or equal to 0"):a&&(e.marginLeft=oe(a/2),e.marginRight=oe(a/2)),`${se(e)}${t.customStyle}`}));return(e,t)=>{const a=k;return u(),i(a,{class:b(`wd-row ${e.customClass}`),style:p(o.value)},{default:d((()=>[f(e.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-ce33520d"]]),ne=L({__name:"index",setup(e){const t=I(""),a=I([]),o=I([]),l=I(0),s=I(1),r=I(5),p=I("more");T((()=>{_()})),O((()=>{s.value=1,r.value=5,_(),setTimeout((()=>{V()}),1e3)})),z((()=>{s.value*r.value<l.value?(p.value="loading",s.value++,b()):p.value="noMore"}));const f=e=>{b()},_=()=>{R().then((e=>{0!=e.content.length&&null!=e.content?(l.value=e.content.length,a.value=e.content,b()):a.value=[]}))},b=()=>{""==t.value?o.value=a.value.filter(((e,t)=>t<r.value*s.value)):(o.value=a.value.filter((e=>e.TaskNo.includes(t.value))),p.value="noMore")};return(e,a)=>{const l=n(c("up-search"),J),s=k,r=v,_=n(c("up-form-item"),P),b=n(c("wd-col"),ee),g=n(c("wd-row"),re),w=n(c("up-form"),M),x=n(c("uni-card"),U),C=n(c("uni-load-more"),E);return u(),i(s,{class:"content"},{default:d((()=>[h(s,{class:"myclass"},{default:d((()=>[h(l,{modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=e=>t.value=e),height:"25px",shape:"square",onInput:f,onChange:f,animation:!0},null,8,["modelValue"])])),_:1}),h(s,{class:"listview"},{default:d((()=>[(u(!0),F(H,null,G(o.value,(e=>(u(),i(x,{margin:"10px",padding:"5px",spacing:"0px",key:e.TaskNo+e.Item,onClick:t=>{var a;0!=(a=e).stockQty?q({url:`/pages/fixture/issue/edit?compName=${a.CompName}&toolsTaskDetailGuid=${a.ToolsTaskDetailGuid}&orderNumber=${a.OrderNumber}&taskNo=${a.TaskNo}&amount=${a.Amount}&IssuedQuantity=${a.IssuedQuantity}`}):Q({title:"库存为0，不可出库！！",icon:"none"})}},{default:d((()=>[h(w,{ref_for:!0,ref:"baseForm",model:e,borderBottom:!0,labelAlign:"right",labelWidth:"60"},{default:d((()=>[h(g,{gutter:"5"},{default:d((()=>[h(b,{span:16},{default:d((()=>[h(_,{label:"计划单号",borderBottom:!0,class:"test"},{default:d((()=>[h(r,{class:"header-text"},{default:d((()=>[m(y(e.TaskNo),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),h(b,{span:8},{default:d((()=>[h(_,{label:"序号",borderBottom:!0,class:"test"},{default:d((()=>[h(r,{class:"header-text",style:{color:"#"}},{default:d((()=>[m(y(e.Item),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024),h(g,{gutter:"5"},{default:d((()=>[h(b,{span:16},{default:d((()=>[h(_,{label:"工单号",borderBottom:!0,class:"test"},{default:d((()=>[h(r,{class:"header-text"},{default:d((()=>[m(y(e.OrderNumber),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),h(b,{span:8},{default:d((()=>[h(_,{label:"面别",borderBottom:!0,class:"test"},{default:d((()=>[h(r,{class:"header-text"},{default:d((()=>[m(y(e.Side),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024),h(g,{gutter:"5"},{default:d((()=>[h(b,{span:24},{default:d((()=>[h(_,{label:"工序",borderBottom:!0,class:"test"},{default:d((()=>[h(r,{class:"header-text"},{default:d((()=>[m(y(e.ProcedureDsc),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024),h(g,{gutter:"5"},{default:d((()=>[h(b,{span:24},{default:d((()=>[h(_,{label:"类型",borderBottom:!0,class:"test"},{default:d((()=>[h(r,{class:"header-text"},{default:d((()=>[m(y(e.CompName),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024),h(g,{gutter:"5"},{default:d((()=>[h(b,{span:8},{default:d((()=>[h(_,{label:"需求数",borderBottom:!0,class:"test"},{default:d((()=>[h(r,{class:"header-text"},{default:d((()=>[m(y(e.Amount),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),h(b,{span:8},{default:d((()=>[h(_,{label:"出库数",borderBottom:!0,class:"test"},{default:d((()=>[h(r,{class:"header-text"},{default:d((()=>[m(y(e.IssuedQuantity),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),h(b,{span:8},{default:d((()=>[h(_,{label:"库存数",borderBottom:!0,class:"test"},{default:d((()=>[h(r,{class:"header-text"},{default:d((()=>[m(y(e.stockQty),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["model"])])),_:2},1032,["onClick"])))),128))])),_:1}),h(C,{status:p.value},null,8,["status"])])),_:1})}}},[["__scopeId","data-v-e5139632"]]);export{ne as default};
